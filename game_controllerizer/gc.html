<!-- ----------------------------------------------------------------------------------- -->

<script type="text/javascript">
    RED.nodes.registerType('gamepad',{
        category: 'Game_control',
        color: '#F1BC03',
        defaults: {
            name: {value:""},
            dpad: {value: 5,required:true},
            button: {value: 0,required:true},
            pos0x: {value: 0,required:true},
            pos0y: {value: 0,required:true},
            pos1x: {value: 0,required:true},
            pos1y: {value: 0,required:true},
            mode: {value: 3,required:true}
        },
        inputs:1,
        outputs:1,
        icon: "inject.png",
        label: function() {
            return this.name||"[gamepad]";
        }
    });
</script>

<script type="text/x-red" data-template-name="gamepad">
    <div class="form-row">
        <label for="node-input-dpad"><i class="fa fa-arrows"></i> Dpad</label>
        <select id="node-input-dpad">
            <option value=1>⬋ LeftBottom</option>
            <option value=2>⬇ Bottom</option>
            <option value=3>⬊ RightButtom</option>
            <option value=4>⬅ LeftMiddle</option>
            <option value=5>●  Neutral</option>
            <option value=6>➡ RightMiddle</option>
            <option value=7>⬉ LeftTop</option>
            <option value=8>⬆ Top</option>
            <option value=9>⬈ RightTop</option>
		</select>
	</div>
    <div class="form-row">
        <label for="node-input-button"><i class="fa fa-gamepad"></i> Button</label>
        <select id="node-input-button">
            <option value=0>Button-0</option>
            <option value=1>Button-1</option>
            <option value=2>Button-2</option>
            <option value=3>Button-3</option>
            <option value=4>Button-4</option>
            <option value=5>Button-5</option>
            <option value=6>Button-6</option>
            <option value=7>Button-7</option>
            <option value=8>Button-8</option>
            <option value=9>Button-9</option>
            <option value=10>Button-10</option>
            <option value=11>Button-11</option>
            <option value=-1>None</option>
        </select>
    </div>
    <div class="form-row">
        <label><i class="fa fa-plus-circle"></i> Stick(left)</label>
        X <input type="number" id="node-input-pos0x" min=-127 max=127 value=0 style="width:145px;">
        Y <input type="number" id="node-input-pos0y" min=-127 max=127 value=0 style="width:145px;">
    </div>
    <div class="form-row">
        <label><i class="fa fa-plus-circle"></i> Stick(right)</label>
        X <input type="number" id="node-input-pos1x" min=-127 max=127 value=0 style="width:145px;">
        Y <input type="number" id="node-input-pos1y" min=-127 max=127 value=0 style="width:145px;">
    </div>
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-sign-out"></i> Input mode</label>
        <select id="node-input-mode">
            <option value=3>Push</option>
            <option value=-1>Hold</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>        
    <div class="form-tips">
		<b>Tip:</b> Gamepad control. Stick X/Y range = [-127:127].
    </div>
</script>

<script type="text/x-red" data-help-name="gamepad">
    <p>Gamepad control.</p>
</script>


<!-- ----------------------------------------------------------------------------------- -->
<script type="text/javascript">
    RED.nodes.registerType('button',{
        category: 'Game_control',
        color: '#F1BC03',
        defaults: {
			name: {value:""},
			button: {value:0,required:true},
            mode: {value:"push",required:true}
		},
        inputs:1,
        outputs:1,
        icon: "inject.png",
        label: function() {
            return this.name||"[button] btn-" + this.button;
        }
    });
</script>

<script type="text/x-red" data-template-name="button">
    <div class="form-row">
        <label for="node-input-button"><i class="fa fa-gamepad"></i> Button</label>
        <select id="node-input-button">
            <option value=0>Button-0</option>
            <option value=1>Button-1</option>
            <option value=2>Button-2</option>
            <option value=3>Button-3</option>
            <option value=4>Button-4</option>
            <option value=5>Button-5</option>
            <option value=6>Button-6</option>
            <option value=7>Button-7</option>
            <option value=8>Button-8</option>
            <option value=9>Button-9</option>
            <option value=10>Button-10</option>
            <option value=11>Button-11</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-sign-out"></i> Input mode</label>
        <select id="node-input-mode">
            <option value="push">Push</option>
            <option value="hold">Hold</option>
            <option value="release">Release</option>
        </select>
    </div>	
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
	</div>
	<div class="form-tips">
        <b>Tip:</b> Individual Button control.
	</div>
</script>
<script type="text/x-red" data-help-name="button">
    <p>Individual Button control.</p>
</script>

<!-- ----------------------------------------------------------------------------------- -->
<script type="text/javascript">
    RED.nodes.registerType('dpad',{
        category: 'Game_control',
        color: '#F1BC03',
        defaults: {
			name: {value:""},
			dpad: {value:5,required:true},
            mode: {value:-1,required:true}
		},
        inputs:1,
        outputs:1,
        icon: "inject.png",
        label: function() {
            var id2arrow = ["", "⬋", "⬇", "⬊", "⬅", "●", "➡", "⬉", "⬆", "⬈"]
            var direction = id2arrow[this.dpad]
            return this.name||"[dpad] " + direction
        }
    });
</script>

<script type="text/x-red" data-template-name="dpad">
    <div class="form-row">
        <label for="node-input-dpad"><i class="fa fa-arrows"></i> Dpad</label>
        <select id="node-input-dpad">
            <option value=1>⬋ LeftBottom</option>
            <option value=2>⬇ Bottom</option>
            <option value=3>⬊ RightButtom</option>
            <option value=4>⬅ LeftMiddle</option>
            <option value=5>●  Neutral</option>
            <option value=6>➡ RightMiddle</option>
            <option value=7>⬉ LeftTop</option>
            <option value=8>⬆ Top</option>
            <option value=9>⬈ RightTop</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-sign-out"></i> Input mode</label>
        <select id="node-input-mode">
            <option value=3>Push</option>
            <option value=-1>Hold</option>
        </select>
    </div>	
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
	</div>
	<!-- <div class="form-tips">
        <b>Tip:</b> Dpad control
	</div> -->
</script>
<script type="text/x-red" data-help-name="dpad">
    <p>Dpad control.</p>
</script>

<!-- ----------------------------------------------------------------------------------- -->
<script type="text/javascript">
    RED.nodes.registerType('stick',{
        category: 'Game_control',
        color: '#F1BC03',
        defaults: {
			name: {value:""},
			stick: {value:0,required:true},
			posx: {value:0,required:true},
			posy: {value:0,required:true},
            mode: {value:-1,required:true}
		},
        inputs:1,
        outputs:1,
        icon: "inject.png",
        label: function() {
            return this.name||"[stk" + this.stick + "] " + this.posx + "/" + this.posy
        }
    });
</script>

<script type="text/x-red" data-template-name="stick">
    <div class="form-row">
        <label for="node-input-stick"><i class="fa fa-plus-circle"></i> Stick</label>
        <select id="node-input-stick">
            <option value=0>Left</option>
            <option value=1>Right</option>
        </select>
    </div>
	<div class="form-row">
        <label><i class="fa fa-plus-circle"></i> Position</label>
        X <input type="number" id="node-input-posx" min=-127 max=127 value=0 style="width:95px;">
        Y <input type="number" id="node-input-posy" min=-127 max=127 value=0 style="width:95px;">
    </div>
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-sign-out"></i> Input mode</label>
        <select id="node-input-mode">
            <option value=3>Push</option>
            <option value=-1>Hold</option>
        </select>
    </div>	
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
	</div>
	<!-- <div class="form-tips">
        <b>Tip:</b> Stick control
	</div> -->
</script>
<script type="text/x-red" data-help-name="stick">
    <p>Stick control.</p>
</script>

<!-- ----------------------------------------------------------------------------------- -->
<script type="text/javascript">
    RED.nodes.registerType('input-config',{
        category: 'Game_control',
        color: '#F1BC03',
        defaults: {
			name: {value:""},
			ctarget: {value:"dpad", required:true},
			cmap: {value:0, required:true}
		},
        inputs:1,
        outputs:1,
        icon: "inject.png",
        label: function() {
            return this.name||"[config] " + this.ctarget;
        }
    });
</script>

<script type="text/x-red" data-template-name="input-config">
    <div class="form-row">
        <label for="node-input-ctarget"><i class="fa fa-gamepad"></i> Target</label>
        <select id="node-input-ctarget">
            <option value="dpad">Dpad</option>
            <option value="stk0">Stick (left)</option>
            <option value="stk1">Stick (right)</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-cmap"><i class="fa fa-random"></i> Mapping</label>
        <select id="node-input-cmap">
            <option value=0>Normal</option>
            <option value=1>Flip horizontal</option>
            <option value=2>The other</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
	</div>
    <div class="form-tips">
        <b>Tip:</b> L-R input config.<br>
    </div>
</script>
<script type="text/x-red" data-help-name="input-config">
    <p>L-R input config.</p>
</script>


<!-- ----------------------------------------------------------------------------------- -->
<script type="text/javascript">
    RED.nodes.registerType('interrupt',{
        category: 'Game_control',
        color: '#F1BC03',
        defaults: {
			name: {value:""},
		},
        inputs:1,
        outputs:1,
        icon: "inject.png",
        label: function() {
            return this.name||"[interrupt]";
        }
    });
</script>

<script type="text/x-red" data-template-name="interrupt">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
	</div>
	<div class="form-tips">
        <b>Tip:</b> Interrupt H/W emulator excecution.
	</div>
</script>
<script type="text/x-red" data-help-name="interrupt">
    <p>Interrupt H/W emulator excecution.</p>
</script>

<!-- ----------------------------------------------------------------------------------- -->
<script type="text/javascript">
    RED.nodes.registerType('wait',{
        category: 'Game_control',
        color: '#F1BC03',
        defaults: {
			name: {value:""},
			dur: {value:3,required:true},
		},
        inputs:1,
        outputs:1,
        icon: "inject.png",
        label: function() {
            return this.name || "[wait] " + this.dur + " frame"
        }
    });
</script>

<script type="text/x-red" data-template-name="wait">
    <div class="form-row">
		<label for="node-input-mode"><i class="fa fa-clock-o"></i> Duration</label>
		<input type="number" id="node-input-dur" min=1 max=127 value=3>
    </div>	
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
	</div>
	<div class="form-tips">
        <b>Tip:</b> Wait N-frames (1 frame = 1/60 sec). Duration range = [1:127].
	</div>
</script>
<script type="text/x-red" data-help-name="wait">
    <p>Wait N-frames (1 frame = 1/60 sec).</p>
</script>

<!-- ----------------------------------------------------------------------------------- -->
<script type="text/javascript">
    RED.nodes.registerType('binary-serializer',{
        category: 'Game_control',
        color: '#F1BC03',
        defaults: {
            name: {value:""},
        },
        inputs:1,
        outputs:1,
        icon: "serial.png",
        label: function() {
            return this.name||"binary serializer";
        }
    });
</script>

<script type="text/x-red" data-template-name="binary-serializer">
	<div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-tips">
        <b>Tip:</b> Serialize DSL4GC(Gamepad) to byte[] for output via UART.<br>
    </div>        
</script>

<script type="text/x-red" data-help-name="binary-serializer">
    <p>Serialize DSL4GC(Gamepad) to byte[] for output via UART.</p>
</script>
